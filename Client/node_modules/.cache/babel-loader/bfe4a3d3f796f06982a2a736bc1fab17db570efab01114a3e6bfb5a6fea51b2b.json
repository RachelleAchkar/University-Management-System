{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\UniversityManagementSystem\\\\university-management-system\\\\src\\\\components\\\\AllStudents.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport './AllFaculties.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AllStudents = () => {\n  _s();\n  var _location$state;\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false); // To control modal visibility\n  const [showFileNumberInput, setShowFileNumberInput] = useState(false); // To show file number input\n  const [fileNumber, setFileNumber] = useState(''); // To store file number\n  const [error, setError] = useState(''); // To handle errors for file number\n  const location = useLocation();\n  const majorId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.majorId;\n  const navigate = useNavigate();\n  const [maxFileNumber, setMaxFileNumber] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [studentActionModal, setStudentActionModal] = useState(false); // Student action modal\n  const [selectedStudent, setSelectedStudent] = useState(null); // To store the clicked student\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    // Fetch students when the component loads or when majorId or searchTerm changes\n    fetchStudents();\n  }, [majorId, searchTerm]); // Ensure fetch is triggered for search or majorId change\n\n  const handleSearchChange = () => {\n    setSearchTerm(searchQuery); // Ensure the search term updates\n    fetchStudents(); // Fetch with updated search query\n  };\n  const handleClearSearch = () => {\n    setSearchQuery(\"\"); // Clear search input\n    fetchStudents(\"\"); // Pass empty string to reset\n  };\n  const fetchStudents = (search = searchQuery) => {\n    setLoading(true);\n    setStudents([]); // Clear previous students to avoid duplicates\n\n    const url = new URL(`http://localhost:8080/addStudent/major/${majorId}`);\n    if (search && search.trim() !== \"\") {\n      url.searchParams.append(\"search\", search);\n    }\n    console.log(\"Request URL:\", url.toString()); // Debugging log\n\n    fetch(url).then(response => response.json()).then(data => {\n      console.log(\"Fetched students:\", data); // Debugging\n      setStudents(data); // Overwrite the state, not append\n      setLoading(false);\n    }).catch(error => {\n      console.error(\"Error fetching students:\", error);\n      setLoading(false);\n    });\n  };\n  const handleAddStudent = () => {\n    setShowModal(true); // Show modal when Add Student is clicked\n  };\n  useEffect(() => {\n    fetch('http://localhost:8080/addStudent/maxFileNumber').then(response => response.json()).then(data => {\n      if (data !== null && typeof data === 'number') {\n        setMaxFileNumber(data);\n      } else {\n        setMaxFileNumber(0); // Set to 0 if no students exist\n      }\n    }).catch(error => {\n      console.error('Error fetching max file number:', error);\n      setMaxFileNumber(0); // Default to 0 in case of error\n    });\n  }, []);\n  // Function to delete a student\n  const handleDeleteStudent = studentId => {\n    if (window.confirm(\"Are you sure you want to delete this student?\")) {\n      fetch(`http://localhost:8080/addStudent/delete/${studentId}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {\n        if (response.ok) {\n          setStudents(students.filter(student => student.studentID !== studentId));\n        } else {\n          console.error(\"Error deleting student:\", response.statusText);\n          setError(\"Failed to delete student. Please try again.\");\n        }\n      }).catch(error => {\n        console.error(\"Error:\", error);\n        setError(\"An error occurred while deleting the student.\");\n      });\n    }\n  };\n  const handleNewStudent = () => {\n    const minFileNumber = 30000; // Ensure compliance with backend validation\n    const newFileNumber = maxFileNumber && maxFileNumber >= minFileNumber ? maxFileNumber + 1 : minFileNumber; // Start from 30000 if no file number exists\n    navigate('/addStudent', {\n      state: {\n        isNew: true,\n        fileNumber: newFileNumber,\n        majorId\n      }\n    });\n  };\n  const handleOldStudent = () => {\n    setShowFileNumberInput(true);\n  };\n  const handleSubmitFileNumber = async () => {\n    try {\n      const response = await fetch(`http://localhost:8080/addStudent/info/${fileNumber}`);\n      if (response.ok) {\n        const studentData = await response.json();\n        console.log('Fetched studentData:', studentData);\n        navigate('/addStudent', {\n          state: {\n            fileNumber,\n            majorId,\n            isNew: false,\n            studentData\n          }\n        });\n      } else {\n        console.error('Error fetching studentData:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n  const closeModal = () => {\n    setShowModal(false);\n    setShowFileNumberInput(false);\n    setFileNumber('');\n    setError('');\n  };\n  const handleStudentClick = student => {\n    console.log(student); // Debugging to check the student data\n    setSelectedStudent(student);\n    setStudentActionModal(true);\n  };\n  const handleBackToMajorDetails = () => {\n    navigate('/majordetails', {\n      state: {\n        majorId\n      }\n    });\n  };\n  const handleAddGrade = () => {\n    if (selectedStudent && selectedStudent.studentID) {\n      // Ensure selectedStudent and studentID are available\n      navigate('/addGrade', {\n        state: {\n          student: selectedStudent,\n          studentId: selectedStudent.studentID\n        }\n      });\n    } else {\n      console.error(\"Selected student or studentId is missing\");\n    }\n  };\n  const handleShowTranscript = () => {\n    // Pass studentId along with student data when navigating to \"Show Transcript\"\n    if (selectedStudent && selectedStudent.studentID) {\n      // Ensure selectedStudent and studentID are available\n      navigate('/showTranscript', {\n        state: {\n          student: selectedStudent,\n          studentId: selectedStudent.studentId\n        }\n      });\n    } else {\n      console.error(\"Selected student or studentId is missing\");\n    }\n  };\n  const closeModals = () => {\n    setShowModal(false);\n    setStudentActionModal(false);\n    setSelectedStudent(null);\n  };\n\n  // Disable background scrolling when modal is open\n  useEffect(() => {\n    if (showModal) {\n      document.body.style.overflow = 'hidden'; // Disable scrolling\n    } else {\n      document.body.style.overflow = ''; // Re-enable scrolling when modal is closed\n    }\n\n    // Clean up on unmount or modal close\n    return () => {\n      document.body.style.overflow = ''; // Re-enable scrolling\n    };\n  }, [showModal]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"faculties-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"back-button\",\n      onClick: handleBackToMajorDetails,\n      title: \"Back to Major Details\",\n      children: \"\\uD83E\\uDC80\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Students\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by file number\",\n        value: searchQuery,\n        onChange: e => setSearchQuery(e.target.value),\n        className: \"search-input\" // Add the class name here\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-button\",\n        onClick: handleSearchChange,\n        children: \"\\uD83D\\uDD0D Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"clear-button\",\n        onClick: handleClearSearch,\n        children: \"\\u274C Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), students.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No students found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"faculties-list\",\n      children: students.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"faculty-box\",\n        onClick: () => handleStudentClick(student),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"File Number:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.fileNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 91\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [student.firstName, \" \", student.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Year:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.year\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Date of birth:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.dob\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 93\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 85\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Phone Number:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.phoneNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 92\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 87\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Registration Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.registrationDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 97\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-detail\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 47\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: student.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 86\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: e => {\n            e.stopPropagation(); // Prevent triggering the parent click event\n            handleDeleteStudent(student.studentID);\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }, this)]\n      }, student.fileNumber, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-faculty-button\",\n      onClick: handleAddStudent,\n      children: \"Add Student\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), studentActionModal && selectedStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Actions for \", selectedStudent.firstName, \" \", selectedStudent.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-button\",\n          onClick: handleAddGrade,\n          children: \"Add Grade\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-button\",\n          onClick: handleShowTranscript,\n          children: \"Show Transcript\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-close-button\",\n          onClick: closeModals,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 3\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Select Student Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), !showFileNumberInput ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-button\",\n            onClick: handleNewStudent,\n            children: \"New Student\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-button\",\n            onClick: handleOldStudent,\n            children: \"Old Student\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close-button\",\n            onClick: closeModal,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Enter File Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: fileNumber,\n            onChange: e => setFileNumber(e.target.value),\n            placeholder: \"File Number\",\n            className: \"file-number-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 17\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-text\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-button\",\n            onClick: handleSubmitFileNumber,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close-button\",\n            onClick: closeModal,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n  .modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  .modal {\n    background: #fff;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    text-align: center;\n    width: 80%;\n    max-width: 500px;\n  }\n  \n  .modal h2 {\n    font-size: 24px;\n    color: #456aae;\n    margin-bottom: 15px;\n  }\n\n  .modal-button {\n    margin: 10px;\n    padding: 12px 25px;\n    background-color: #191361;\n    color: white;\n    font-size: 16px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n\n  .modal-button:hover {\n    background-color: #5d45a0;\n  }\n\n  .modal-close-button {\n    margin-top: 15px;\n    color:rgb(165, 56, 44);\n    font-size: 16px;\n    cursor: pointer;\n    border: none;\n    background: none;\n  }\n  .modal-close-button:hover {\n    margin-top: 15px;\n    color:rgb(255, 255, 255);\n    font-size: 16px;\n    cursor: pointer;\n    border: none;\n    background: rgb(165, 56, 44);\n  }\n  .file-number-input {\n    margin-top: 15px;\n    padding: 12px;\n    width: 80%;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    font-size: 16px;\n  }\n\n  .error-text {\n    color: #e74c3c;\n    font-size: 0.9rem;\n    margin-top: 5px;\n  }\n`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 8\n  }, this);\n};\n_s(AllStudents, \"OmSbdBuBy4D1RLLjgXxIT/4XfzI=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AllStudents;\nexport default AllStudents;\nvar _c;\n$RefreshReg$(_c, \"AllStudents\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","AllStudents","_s","_location$state","loading","setLoading","showModal","setShowModal","showFileNumberInput","setShowFileNumberInput","fileNumber","setFileNumber","error","setError","location","majorId","state","navigate","maxFileNumber","setMaxFileNumber","students","setStudents","studentActionModal","setStudentActionModal","selectedStudent","setSelectedStudent","searchQuery","setSearchQuery","searchTerm","setSearchTerm","fetchStudents","handleSearchChange","handleClearSearch","search","url","URL","trim","searchParams","append","console","log","toString","fetch","then","response","json","data","catch","handleAddStudent","handleDeleteStudent","studentId","window","confirm","method","headers","ok","filter","student","studentID","statusText","handleNewStudent","minFileNumber","newFileNumber","isNew","handleOldStudent","handleSubmitFileNumber","studentData","closeModal","handleStudentClick","handleBackToMajorDetails","handleAddGrade","handleShowTranscript","closeModals","document","body","style","overflow","className","children","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","length","map","firstName","lastName","year","dob","email","phoneNumber","address","registrationDate","status","stopPropagation","jsx","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/UniversityManagementSystem/university-management-system/src/components/AllStudents.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport './AllFaculties.css';\r\nconst AllStudents = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false); // To control modal visibility\r\n  const [showFileNumberInput, setShowFileNumberInput] = useState(false); // To show file number input\r\n  const [fileNumber, setFileNumber] = useState(''); // To store file number\r\n  const [error, setError] = useState(''); // To handle errors for file number\r\n  const location = useLocation();\r\n  const majorId = location.state?.majorId;\r\n  const navigate = useNavigate();\r\n  const [maxFileNumber, setMaxFileNumber] = useState(null);\r\n  const [students, setStudents] = useState([]);\r\n  const [studentActionModal, setStudentActionModal] = useState(false); // Student action modal\r\n  const [selectedStudent, setSelectedStudent] = useState(null); // To store the clicked student\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  \r\n\r\n  useEffect(() => {\r\n    // Fetch students when the component loads or when majorId or searchTerm changes\r\n    fetchStudents();\r\n  }, [majorId, searchTerm]); // Ensure fetch is triggered for search or majorId change\r\n\r\n  const handleSearchChange = () => {\r\n    setSearchTerm(searchQuery); // Ensure the search term updates\r\n    fetchStudents();  // Fetch with updated search query\r\n};\r\n\r\n\r\nconst handleClearSearch = () => {\r\n    setSearchQuery(\"\");  // Clear search input\r\n    fetchStudents(\"\");   // Pass empty string to reset\r\n};\r\n\r\nconst fetchStudents = (search = searchQuery) => {\r\n  setLoading(true);\r\n  setStudents([]); // Clear previous students to avoid duplicates\r\n\r\n  const url = new URL(`http://localhost:8080/addStudent/major/${majorId}`);\r\n  \r\n  if (search && search.trim() !== \"\") {\r\n      url.searchParams.append(\"search\", search);\r\n  }\r\n\r\n  console.log(\"Request URL:\", url.toString()); // Debugging log\r\n\r\n  fetch(url)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n          console.log(\"Fetched students:\", data); // Debugging\r\n          setStudents(data); // Overwrite the state, not append\r\n          setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n          console.error(\"Error fetching students:\", error);\r\n          setLoading(false);\r\n      });\r\n};\r\n\r\n\r\n  const handleAddStudent = () => {\r\n    setShowModal(true); // Show modal when Add Student is clicked\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    fetch('http://localhost:8080/addStudent/maxFileNumber')\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (data !== null && typeof data === 'number') {\r\n          setMaxFileNumber(data);\r\n        } else {\r\n          setMaxFileNumber(0); // Set to 0 if no students exist\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching max file number:', error);\r\n        setMaxFileNumber(0); // Default to 0 in case of error\r\n      });\r\n  }, []);\r\n     // Function to delete a student\r\n     const handleDeleteStudent = (studentId) => {\r\n      if (window.confirm(\"Are you sure you want to delete this student?\")) {\r\n        fetch(`http://localhost:8080/addStudent/delete/${studentId}`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n  \r\n        })\r\n          .then((response) => {\r\n            if (response.ok) {\r\n              setStudents(students.filter((student) => student.studentID !== studentId));\r\n            } else {\r\n              console.error(\"Error deleting student:\", response.statusText);\r\n              setError(\"Failed to delete student. Please try again.\");\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error:\", error);\r\n            setError(\"An error occurred while deleting the student.\");\r\n          });\r\n      }\r\n    };\r\n  \r\n\r\n  const handleNewStudent = () => {\r\n    const minFileNumber = 30000; // Ensure compliance with backend validation\r\n    const newFileNumber = maxFileNumber && maxFileNumber >= minFileNumber \r\n      ? maxFileNumber + 1 \r\n      : minFileNumber; // Start from 30000 if no file number exists\r\n    navigate('/addStudent', { state: { isNew: true, fileNumber: newFileNumber, majorId } });\r\n  };\r\n\r\n\r\n  const handleOldStudent = () => {\r\n    setShowFileNumberInput(true);\r\n  };\r\n\r\n  const handleSubmitFileNumber = async () => {\r\n    try {\r\n\r\n      const response = await fetch(`http://localhost:8080/addStudent/info/${fileNumber}`);\r\n\r\n      if (response.ok) {\r\n        const studentData = await response.json();\r\n        console.log('Fetched studentData:', studentData);\r\n        navigate('/addStudent', { state: { fileNumber, majorId, isNew: false, studentData } });\r\n      } else {\r\n        console.error('Error fetching studentData:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  };\r\n  \r\n  \r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setShowFileNumberInput(false);\r\n    setFileNumber('');\r\n    setError('');\r\n  };\r\n\r\n\r\n\r\n  const handleStudentClick = (student) => {\r\n    console.log(student);  // Debugging to check the student data\r\n    setSelectedStudent(student);\r\n    setStudentActionModal(true);\r\n  };\r\n  const handleBackToMajorDetails = () => {\r\n    navigate('/majordetails', { state: { majorId } });\r\n  };\r\n\r\n\r\n  const handleAddGrade = () => {\r\n    if (selectedStudent && selectedStudent.studentID) { // Ensure selectedStudent and studentID are available\r\n      navigate('/addGrade', { state: { student: selectedStudent, studentId: selectedStudent.studentID } });\r\n    } else {\r\n      console.error(\"Selected student or studentId is missing\");\r\n    }\r\n  };\r\n  \r\n  \r\n\r\n  const handleShowTranscript = () => {\r\n    // Pass studentId along with student data when navigating to \"Show Transcript\"\r\n    if (selectedStudent && selectedStudent.studentID) { // Ensure selectedStudent and studentID are available\r\n    navigate('/showTranscript', { state: { student: selectedStudent, studentId: selectedStudent.studentId } });\r\n  } else {\r\n    console.error(\"Selected student or studentId is missing\");\r\n  }\r\n  };\r\n\r\n  const closeModals = () => {\r\n    setShowModal(false);\r\n    setStudentActionModal(false);\r\n    setSelectedStudent(null);\r\n\r\n  };\r\n  \r\n // Disable background scrolling when modal is open\r\n useEffect(() => {\r\n  if (showModal) {\r\n    document.body.style.overflow = 'hidden'; // Disable scrolling\r\n  } else {\r\n    document.body.style.overflow = ''; // Re-enable scrolling when modal is closed\r\n  }\r\n\r\n  // Clean up on unmount or modal close\r\n  return () => {\r\n    document.body.style.overflow = ''; // Re-enable scrolling\r\n  };\r\n}, [showModal]);\r\n\r\n  return  (\r\n   \r\n       <div className=\"faculties-container\">\r\n      {/* Back Button */}\r\n      <button\r\n        className=\"back-button\"\r\n        onClick={handleBackToMajorDetails}\r\n        title=\"Back to Major Details\"\r\n      >\r\n        🢀\r\n      </button>\r\n      <h1>Students</h1>\r\n      <div className=\"search-container\">\r\n  <input\r\n    type=\"text\"\r\n    placeholder=\"Search by file number\"\r\n    value={searchQuery}\r\n    onChange={(e) => setSearchQuery(e.target.value)}\r\n    className=\"search-input\"  // Add the class name here\r\n  />\r\n  <button className=\"search-button\" onClick={handleSearchChange}>🔍 Search</button> \r\n  <button className=\"clear-button\" onClick={handleClearSearch}>❌ Clear</button> \r\n</div>\r\n      {students.length === 0 ? (\r\n        <p>No students found.</p>\r\n      ) : (\r\n        <div className=\"faculties-list\">\r\n          {students.map((student) => (\r\n            <div\r\n              key={student.fileNumber}\r\n              className=\"faculty-box\"\r\n              onClick={() => handleStudentClick(student)}\r\n            >\r\n              <div className='course-detail'> <span className=\"label\">File Number:</span> <span>{student.fileNumber}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Name:</span> <span>{student.firstName} {student.lastName}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Year:</span> <span>{student.year}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Date of birth:</span> <span>{student.dob}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Email:</span> <span>{student.email}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Phone Number:</span> <span>{student.phoneNumber}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Address:</span> <span>{student.address}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Registration Date:</span> <span>{student.registrationDate}</span></div>\r\n              <div className='course-detail'> <span className=\"label\">Status:</span> <span>{student.status}</span></div>\r\n                {/* Delete Button */}\r\n                <button\r\n                className=\"delete-button\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation(); // Prevent triggering the parent click event\r\n                  handleDeleteStudent(student.studentID);\r\n                }}\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <button className=\"add-faculty-button\" onClick={handleAddStudent}>\r\n        Add Student\r\n      </button>\r\n      {studentActionModal && selectedStudent && (\r\n  <div className=\"modal-overlay\">\r\n    <div className=\"modal\">\r\n      <h3>Actions for {selectedStudent.firstName} {selectedStudent.lastName}</h3>\r\n      <button className=\"modal-button\" onClick={handleAddGrade}>Add Grade</button>\r\n      <button className=\"modal-button\" onClick={handleShowTranscript}>Show Transcript</button>\r\n      <button className=\"modal-close-button\" onClick={closeModals}>Cancel</button>\r\n    </div>\r\n  </div>\r\n      )}\r\n      {showModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <h3>Select Student Type</h3>\r\n            {!showFileNumberInput ? (\r\n              <>\r\n                <button className=\"modal-button\" onClick={handleNewStudent}>\r\n                  New Student\r\n                </button>\r\n                <button className=\"modal-button\" onClick={handleOldStudent}>\r\n                  Old Student\r\n                </button>\r\n                <button className=\"modal-close-button\" onClick={closeModal}>\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <h4>Enter File Number</h4>\r\n                <input\r\n                  type=\"text\"\r\n                  value={fileNumber}\r\n                  onChange={(e) => setFileNumber(e.target.value)}\r\n                  placeholder=\"File Number\"\r\n                  className=\"file-number-input\"\r\n                />\r\n                {error && <p className=\"error-text\">{error}</p>}\r\n                <button className=\"modal-button\" onClick={handleSubmitFileNumber}>\r\n                  Submit\r\n                </button>\r\n                <button className=\"modal-close-button\" onClick={closeModal}>\r\n                  Cancel\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style jsx>{`\r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .modal {\r\n    background: #fff;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n    text-align: center;\r\n    width: 80%;\r\n    max-width: 500px;\r\n  }\r\n  \r\n  .modal h2 {\r\n    font-size: 24px;\r\n    color: #456aae;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .modal-button {\r\n    margin: 10px;\r\n    padding: 12px 25px;\r\n    background-color: #191361;\r\n    color: white;\r\n    font-size: 16px;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s ease;\r\n  }\r\n\r\n  .modal-button:hover {\r\n    background-color: #5d45a0;\r\n  }\r\n\r\n  .modal-close-button {\r\n    margin-top: 15px;\r\n    color:rgb(165, 56, 44);\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border: none;\r\n    background: none;\r\n  }\r\n  .modal-close-button:hover {\r\n    margin-top: 15px;\r\n    color:rgb(255, 255, 255);\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border: none;\r\n    background: rgb(165, 56, 44);\r\n  }\r\n  .file-number-input {\r\n    margin-top: 15px;\r\n    padding: 12px;\r\n    width: 80%;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .error-text {\r\n    color: #e74c3c;\r\n    font-size: 0.9rem;\r\n    margin-top: 5px;\r\n  }\r\n`}</style>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllStudents;"],"mappings":"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AAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eACDtF,OAAA;MAAOyG,GAAG;MAAAzB,QAAA,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAC;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAED,CAAC;AAEV,CAAC;AAAClF,EAAA,CA7XID,WAAW;EAAA,QAMEN,WAAW,EAEXC,WAAW;AAAA;AAAA4G,EAAA,GARxBvG,WAAW;AA+XjB,eAAeA,WAAW;AAAC,IAAAuG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}